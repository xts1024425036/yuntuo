webpackJsonp([1],{"+31f":function(t,e){},"+m/N":function(t,e){},"0gWL":function(t,e){},"6Ky8":function(t,e){},HSk6:function(t,e){},Mi8i:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};s.d(i,"saveTokenAndWXUser",function(){return C}),s.d(i,"logOut",function(){return y});var n=s("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"my-footer flex",staticStyle:{background:"#fff"}},[e("router-link",{staticClass:"flex-item",attrs:{tag:"div",to:"/orders/uncomplete"}},[e("div",{staticClass:"desc"},[this._v("未完成单")])]),this._v(" "),e("router-link",{staticClass:"flex-item",attrs:{tag:"div",to:"/orders/complete"}},[e("div",{staticClass:"desc"},[this._v("完结单")])]),this._v(" "),e("router-link",{staticClass:"flex-item",attrs:{tag:"div",to:"/orders/issue"}},[e("div",{staticClass:"desc"},[this._v("问题单")])])],1)},staticRenderFns:[]};var a={name:"App",components:{FooterMenu:s("VU/8")({name:"FooterMenu",components:{},data:function(){return{}},methods:{},mounted:function(){}},o,!1,function(t){s("Ta9z")},"data-v-41c236a8",null).exports}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("keep-alive",[e("router-view")],1),this._v(" "),this._e()],1)},staticRenderFns:[]};var l=s("VU/8")(a,r,!1,function(t){s("+31f")},null,null).exports,c=s("/ocq"),u={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n    "+this._s(this.msg)+"\n")])},staticRenderFns:[]};var d=s("VU/8")({name:"Home",components:{},data:function(){return{msg:"主页"}},methods:{},mounted:function(){}},u,!1,function(t){s("Q5Z6")},"data-v-4e80c047",null).exports;var h=s("Au9i"),p=s.n(h),f=s("//Fk"),m=s.n(f),v=s("mtWM"),g=s.n(v),_=s("NYxO"),w=s("MfZv"),b=s.n(w);function x(t,e){b.a.set(t+"_token",e)}var C=function(t,e){var s,i,n=t.commit,o=t.state,a=e.token,r=e.user;n("SAVE_TOKEN",a),x(o.wxAppid,a),n("SAVE_WXUSER",r),s=o.wxAppid,i=r,b.a.set(s+"_wxuser",i)},y=function(t){var e=t.commit,s=t.state;e("LOGOUT"),x(s.wxAppid,null)},S=s("UjVw"),D={inited:!1,wxAppid:"wx09b413cc4dbb9bc6",gsid:"99990000001",token:"",wxUser:{}},L={initStore:function(t){console.log("init store state"),t.inited=!0;var e,s=t.wxAppid;t.token=(e=s,b.a.get(e+"_token",null)),t.wxUser=function(t){return b.a.get(t+"_wxuser",null)}(s)},SAVE_TOKEN:function(t,e){t.token=e},SAVE_WXUSER:function(t,e){t.wxUser=e},LOGOUT:function(t){t.token=null}};s("sax8");n.default.use(_.a);var T=new _.a.Store({actions:i,getters:S,state:D,mutations:L,strict:!1,plugins:[]});g.a.defaults.timeout=2e4,g.a.defaults.baseURL="https://app.51yuntuo.com/datacenter/api/",g.a.interceptors.request.use(function(t){return T.state.token&&(t.headers.Authorization="Bearer "+T.state.token),t},function(t){return m.a.reject(t)}),g.a.interceptors.response.use(function(t){return 1===t.data.result?m.a.resolve(t.data.data):m.a.reject(t.data)},function(t){if(t.response){switch(console.log(t.response),t.response.status){case 401:"Login"!==wt.currentRoute.name&&h.MessageBox.confirm(t.response.data.msg).then(function(t){T.dispatch("logOut"),wt.push({path:"/login",query:{redirect:wt.currentRoute.fullPath}})}).catch(function(t){console.log("press cancel")})}var e=t.response.data;return"string"==typeof e&&(e={msg:"连接失败: "+t.response.status+" "+t.response.statusText}),m.a.reject(e)}return t.msg="连接失败",m.a.reject(t)});var k=g.a;var I={name:"Login",components:{},data:function(){return{showSpinner:!0}},methods:{},activated:function(){var t,e,s,i,n=this,o=this.$store.state.token,a=this.$route.query.redirect||"/";if(o)this.$router.push(a);else if(/MicroMessenger/i.test(navigator.userAgent.toLowerCase())){console.log("wx device");var r=this.$route.query.appid,l=this.$route.query.code,c=this.$route.query.state;if(l)(t=r,e=l,s=c,i="/oauth/wx?appid="+t+"&code="+e+"&state="+s,k.post(i)).then(function(t){console.log("login success"),n.$store.dispatch("saveTokenAndWXUser",t).then(function(){t.bindMobile?n.$router.push(a):n.$router.push({name:"BindMobile",query:{redirect:a,needBind:!0}})})}).catch(function(t){h.MessageBox.confirm(t.msg).then(function(t){n.$router.push({name:"Login",query:{redirect:a}})}).catch(function(t){console.log("press cancel")})});else{var u=document.location.href;document.location.href="https://tp.ymdatas.com/wxsvr/api/wxlogin/pre?appid="+this.$store.state.wxAppid+"&codeMode=1&rurl="+encodeURIComponent(u)}}else Object(h.Toast)({message:"当前设备不受支持,请在微信中打开",duration:-1,iconClass:"iconfont icon-frown ntc"}),this.showSpinner=!1}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ctnMiddle"},[this.showSpinner?e("mt-spinner",{staticClass:"spnr",attrs:{type:"triple-bounce",color:"rgb(38, 162, 255)",size:60}}):this._e()],1)},staticRenderFns:[]};var U=s("VU/8")(I,R,!1,function(t){s("vY1k")},"data-v-9bdace8e",null).exports,$={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo-ctnr"},[e("div",{staticClass:"logo-pic"}),e("br"),this._v(" "),e("div",{staticClass:"desc1"},[this._v("云驼联盟")]),e("br"),this._v(" "),e("div",{staticClass:"desc2"},[this._v("家居送装维修专业云平台")])])}]};var O=60,V=void 0,M={name:"BindMobile",components:{LogoBlock:s("VU/8")({name:"LogoBlock",data:function(){return{}}},$,!1,function(t){s("TjKP")},"data-v-b418980c",null).exports},data:function(){return{mobile:"",vcode:"",vcodeBtnName:"获取验证码",disableVcodeBtn:!1}},computed:{disCommitBtn:function(){return 6!==this.vcode.length}},activated:function(){this.$route.query.needBind&&this.showMessage("未绑定手机号,请先进行绑定")},methods:{sendVcode:function(){var t,e=this;(console.log("send vcode"),11===this.mobile.length)?(this.disableVcodeBtn=!0,(t=this.mobile,k.post("/sms/vcode/send",{type:"wxbind",mobile:t})).then(function(t){e.showMessage("发送成功"),e.vcodeBtnLife()}).catch(function(t){e.disableVcodeBtn=!1,e.showMessage(t.msg)})):this.showMessage("请输入正确的手机号")},commitVcode:function(){var t,e,s=this;(t=this.mobile,e=this.vcode,k.post("/user/wxBindMobile",{mobile:t,vcode:e})).then(function(t){t.isBind&&(s.showMessage("绑定成功","middle"),setTimeout(function(){var t=s.$route.query.redirect||"/";s.$router.push(t)},2e3))}).catch(function(t){s.showMessage(t.msg)})},vcodeBtnLife:function(){O--,this.vcodeBtnName="重新发送("+O+"s)",O>=0?setTimeout(this.vcodeBtnLife,1e3):(O=60,this.disableVcodeBtn=!1,this.vcodeBtnName="获取验证码")},showMessage:function(t,e){V&&V.close();var s=e||"bottom";console.log(s),V=Object(h.Toast)({message:t,position:s})}},mounted:function(){}},P={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("logo-block"),t._v(" "),s("div",{staticClass:"content"},[s("mt-field",{attrs:{label:"手机号",placeholder:"请输入手机号",type:"tel",attr:{maxlength:11}},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),t._v(" "),s("mt-field",{attrs:{label:"验证码",placeholder:"验证码",type:"tel",attr:{maxlength:6}},model:{value:t.vcode,callback:function(e){t.vcode=e},expression:"vcode"}},[s("mt-button",{staticClass:"vcode-btn",attrs:{type:"default",disabled:t.disableVcodeBtn},nativeOn:{click:function(e){return t.sendVcode(e)}}},[t._v(t._s(t.vcodeBtnName))])],1),t._v(" "),s("mt-button",{staticStyle:{"margin-top":"1em"},attrs:{type:"primary",size:"large",disabled:t.disCommitBtn},nativeOn:{click:function(e){return t.commitVcode(e)}}},[t._v("确认绑定")])],1)],1)},staticRenderFns:[]};var B=s("VU/8")(M,P,!1,function(t){s("roQ7")},"data-v-31614008",null).exports;var E=s("GQaK"),j={props:{y:{type:Number,default:0}},data:function(){return{width:50,height:80}},computed:{distance:function(){return Math.max(0,Math.min(this.y*this.ratio,this.maxDistance))},style:function(){return"width:"+this.width/this.ratio+"px;height:"+this.height/this.ratio+"px"}},created:function(){this.ratio=window.devicePixelRatio,this.width*=this.ratio,this.height*=this.ratio,this.initRadius=18*this.ratio,this.minHeadRadius=12*this.ratio,this.minTailRadius=5*this.ratio,this.initArrowRadius=10*this.ratio,this.minArrowRadius=6*this.ratio,this.arrowWidth=3*this.ratio,this.maxDistance=40*this.ratio,this.initCenterX=25*this.ratio,this.initCenterY=25*this.ratio,this.headCenter={x:this.initCenterX,y:this.initCenterY}},mounted:function(){this._draw()},methods:{_draw:function(){var t=this.$refs.bubble,e=t.getContext("2d");e.clearRect(0,0,t.width,t.height),this._drawBubble(e),this._drawArrow(e)},_drawBubble:function(t){t.save(),t.beginPath();var e=this.distance/this.maxDistance,s=this.initRadius-(this.initRadius-this.minHeadRadius)*e;this.headCenter.y=this.initCenterY-(this.initRadius-this.minHeadRadius)*e,t.arc(this.headCenter.x,this.headCenter.y,s,0,Math.PI,!0);var i=this.initRadius-(this.initRadius-this.minTailRadius)*e,n={x:this.headCenter.x,y:this.headCenter.y+this.distance},o={x:n.x-i,y:n.y},a={x:o.x,y:o.y-this.distance/2};t.quadraticCurveTo(a.x,a.y,o.x,o.y),t.arc(n.x,n.y,i,Math.PI,0,!0);var r={x:this.headCenter.x+s,y:this.headCenter.y},l={x:n.x+i,y:r.y+this.distance/2};t.quadraticCurveTo(l.x,l.y,r.x,r.y),t.fillStyle="rgb(170,170,170)",t.fill(),t.strokeStyle="rgb(153,153,153)",t.stroke(),t.restore()},_drawArrow:function(t){t.save(),t.beginPath();var e=this.distance/this.maxDistance,s=this.initArrowRadius-(this.initArrowRadius-this.minArrowRadius)*e;t.arc(this.headCenter.x,this.headCenter.y,s-(this.arrowWidth-e),-Math.PI/2,0,!0),t.arc(this.headCenter.x,this.headCenter.y,s,0,3*Math.PI/2,!1),t.lineTo(this.headCenter.x,this.headCenter.y-s-this.arrowWidth/2+e),t.lineTo(this.headCenter.x+2*this.arrowWidth-2*e,this.headCenter.y-s+this.arrowWidth/2),t.lineTo(this.headCenter.x,this.headCenter.y-s+3*this.arrowWidth/2-e),t.fillStyle="rgb(255,255,255)",t.fill(),t.strokeStyle="rgb(170,170,170)",t.stroke(),t.restore()}},watch:{y:function(){this._draw()}}},A={render:function(){var t=this.$createElement;return(this._self._c||t)("canvas",{ref:"bubble",style:this.style,attrs:{width:this.width,height:this.height}})},staticRenderFns:[]};var F=s("VU/8")(j,A,!1,function(t){s("yD7z")},"data-v-70f2208e",null).exports;var W={name:"LoadMore",props:{data:{type:Array,default:function(){return[]}},probeType:{type:Number,default:1},click:{type:Boolean,default:!0},listenScroll:{type:Boolean,default:!1},listenBeforeScroll:{type:Boolean,default:!1},listenScrollEnd:{type:Boolean,default:!1},direction:{type:String,default:"vertical"},scrollbar:{type:null,default:!0},pullDownRefresh:{type:null,default:!1},pullUpLoad:{type:null,default:!1},startY:{type:Number,default:0},refreshDelay:{type:Number,default:20},freeScroll:{type:Boolean,default:!1},mouseWheel:{type:Boolean,default:!1},bounce:{default:!0},zoom:{default:!1}},data:function(){return{beforePullDown:!0,isRebounding:!1,isPullingDown:!1,isPullUpLoad:!1,pullUpDirty:!0,pullDownStyle:"",bubbleY:0}},computed:{pullUpTxt:function(){var t=this.pullUpLoad&&this.pullUpLoad.txt&&this.pullUpLoad.txt.more||"加载更多",e=this.pullUpLoad&&this.pullUpLoad.txt&&this.pullUpLoad.txt.noMore||"没有更多记录了";return this.pullUpDirty?t:e},refreshTxt:function(){return this.pullDownRefresh&&this.pullDownRefresh.txt||"刷新成功"}},created:function(){this.pullDownInitTop=-50},mounted:function(){var t=this;setTimeout(function(){t.initScroll()},20)},destroyed:function(){this.$refs.scroll&&this.$refs.scroll.destroy()},methods:{initScroll:function(){var t=this;if(this.$refs.wrapper){this.$refs.listWrapper&&(this.pullDownRefresh||this.pullUpLoad)&&(this.$refs.listWrapper.style.minHeight=function(t){if(t instanceof window.SVGElement){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}(this.$refs.wrapper).height+1+"px");var e={probeType:this.probeType,click:this.click,scrollY:this.freeScroll||"vertical"===this.direction,scrollX:this.freeScroll||"horizontal"===this.direction,scrollbar:this.scrollbar,pullDownRefresh:!!this.pullDownRefresh&&{threshold:80,stop:50},pullUpLoad:this.pullUpLoad,startY:this.startY,freeScroll:this.freeScroll,mouseWheel:this.mouseWheel,bounce:this.bounce,zoom:this.zoom};this.scroll=new E.a(this.$refs.wrapper,e),this.listenScroll&&this.scroll.on("scroll",function(e){t.$emit("scroll",e)}),this.listenScrollEnd&&this.scroll.on("scrollEnd",function(e){t.$emit("scroll-end",e)}),this.listenBeforeScroll&&(this.scroll.on("beforeScrollStart",function(){t.$emit("beforeScrollStart")}),this.scroll.on("scrollStart",function(){t.$emit("scroll-start")})),this.pullDownRefresh&&this._initPullDownRefresh(),this.pullUpLoad&&this._initPullUpLoad()}},disable:function(){this.scroll&&this.scroll.disable()},enable:function(){this.scroll&&this.scroll.enable()},refresh:function(){this.scroll&&this.scroll.refresh()},scrollTo:function(){this.scroll&&this.scroll.scrollTo.apply(this.scroll,arguments)},scrollToElement:function(){this.scroll&&this.scroll.scrollToElement.apply(this.scroll,arguments)},destroy:function(){this.scroll.destroy()},forceUpdate:function(t){var e=this;this.pullDownRefresh&&this.isPullingDown?(this.isPullingDown=!1,this._reboundPullDown().then(function(){e._afterPullDown()})):this.pullUpLoad&&this.isPullUpLoad?(this.isPullUpLoad=!1,this.scroll.finishPullUp(),this.pullUpDirty=t,this.refresh()):this.refresh()},_initPullDownRefresh:function(){var t=this;this.scroll.on("pullingDown",function(){t.beforePullDown=!1,t.isPullingDown=!0,t.$emit("pullingDown")}),this.scroll.on("scroll",function(e){t.pullDownRefresh&&(t.beforePullDown?(t.bubbleY=Math.max(0,e.y+t.pullDownInitTop),t.pullDownStyle="top:"+Math.min(e.y+t.pullDownInitTop,10)+"px"):t.bubbleY=0,t.isRebounding&&(t.pullDownStyle="top:"+(10-(t.pullDownRefresh.stop-e.y))+"px"))})},_initPullUpLoad:function(){var t=this;this.scroll.on("pullingUp",function(){t.isPullUpLoad=!0,t.$emit("pullingUp")})},_reboundPullDown:function(){var t=this,e=this.pullDownRefresh.stopTime,s=void 0===e?600:e;return new m.a(function(e){setTimeout(function(){t.isRebounding=!0,t.scroll.finishPullDown(),e()},s)})},_afterPullDown:function(){var t=this;setTimeout(function(){t.pullDownStyle="top:"+t.pullDownInitTop+"px",t.beforePullDown=!0,t.isRebounding=!1,t.refresh()},this.scroll.options.bounceTime)}},watch:{data:function(){var t=this;setTimeout(function(){t.forceUpdate(!0)},this.refreshDelay)}},components:{Bubble:F}},N={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"wrapper",staticClass:"list-wrapper"},[s("div",{staticClass:"scroll-content"},[s("div",{ref:"listWrapper"},[t._t("default")],2),t._v(" "),t._t("pullup",[t.pullUpLoad?s("div",{staticClass:"pullup-wrapper"},[t.isPullUpLoad?s("div",{staticClass:"after-trigger"},[s("mt-spinner",{attrs:{type:"fading-circle"}})],1):s("div",{staticClass:"before-trigger"},[s("span",[t._v(t._s(t.pullUpTxt))])])]):t._e()],{pullUpLoad:t.pullUpLoad,isPullUpLoad:t.isPullUpLoad})],2),t._v(" "),t._t("pulldown",[t.pullDownRefresh?s("div",{ref:"pulldown",staticClass:"pulldown-wrapper",style:t.pullDownStyle},[t.beforePullDown?s("div",{staticClass:"before-trigger"},[s("bubble",{attrs:{y:t.bubbleY}})],1):s("div",{staticClass:"after-trigger"},[t.isPullingDown?s("div",{staticClass:"loading"},[s("mt-spinner",{attrs:{type:"fading-circle"}})],1):s("div",[s("span",[t._v(t._s(t.refreshTxt))])])])]):t._e()],{pullDownRefresh:t.pullDownRefresh,pullDownStyle:t.pullDownStyle,beforePullDown:t.beforePullDown,isPullingDown:t.isPullingDown,bubbleY:t.bubbleY})],2)},staticRenderFns:[]};var Y=s("VU/8")(W,N,!1,function(t){s("zSBH")},null,null).exports,H={name:"ImageViewer",props:{visible:{type:Boolean,default:!1},imageList:{type:Array,default:function(){return[]}}},data:function(){return{viewerVisible:this.visible}},computed:{showSwiper:function(){return this.imageList.length>0}},watch:{visible:function(t){this.viewerVisible=t},viewerVisible:function(t){this.$emit("onViewerToogle",t)}},methods:{closeAll:function(){this.viewerVisible=!1}}},z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("mt-popup",{staticClass:"image-viewer-pop",attrs:{"popup-transition":"popup-fade"},model:{value:t.viewerVisible,callback:function(e){t.viewerVisible=e},expression:"viewerVisible"}},[s("span",{staticClass:"notice txtc"},[t._v("点击任意位置可关闭浏览")]),t._v(" "),t.showSwiper?s("mt-swipe",{staticClass:"image-viewer",attrs:{auto:0,prevent:!0,speed:100,continuous:!1}},t._l(t.imageList,function(e,i){return s("mt-swipe-item",{key:i},[s("div",{staticClass:"image-item",on:{click:t.closeAll}},[s("img",{attrs:{src:e}})])])})):t._e()],1)},staticRenderFns:[]};var q={name:"CusOrders",components:{LoadMore:Y,ImageViewer:s("VU/8")(H,z,!1,function(t){s("Mi8i")},null,null).exports},data:function(){return{screenHeight:667,orderList:[],nextPageNo:1,tabSel:"",dateFilters:[],selType:"",imageViewerVis:!1,imageList:[]}},computed:{noDataFound:function(){return 0===this.orderList.length},needReload:function(){return{tabSel:this.tabSel,selType:this.selType}}},watch:{needReload:function(t){console.log("reload all Data"),this.reloadListData()}},methods:{initOptions:function(t){this.selType=t.selType;var e=t.dateSels;this.dateFilters=e,t.defaultDateId?this.tabSel=t.defaultDateId:e&&e.length>0?this.tabSel=e[0].id:this.tabSel=""},reloadListData:function(){this.nextPageNo=1,this.initLoadMoreHeight(),this.loadMoreData(),this.$refs.scroll.scrollTo(0,0)},loadMoreData:function(){var t,e,s,i,n=this;(t=this.nextPageNo,e=this.tabSel,s=this.selType,i="uncomplete"===s?5:8,k.get("/ctmOrders?page="+t+"&df="+e+"&st="+s+"&pageSize="+i)).then(function(t){console.log(t),1===n.nextPageNo&&(n.orderList=[]),null!==t.dataList&&0!==t.dataList.length?(n.orderList=n.orderList.concat(t.dataList),n.nextPageNo++):n.$refs.scroll.forceUpdate()}).catch(function(t){1===n.nextPageNo&&(n.orderList=[]),n.$refs.scroll.forceUpdate(),Object(h.Toast)(t.msg)})},initLoadMoreHeight:function(){this.$refs.loadmoreCtn.style.height=document.documentElement.clientHeight-(this.dateFilters.length>1?49:0)+"px"},showImageViewer:function(t){this.imageList=t||[],this.imageViewerVis=!0},onImageViewerToggle:function(t){this.imageViewerVis=t}},mounted:function(){var t=this;console.log("this mounted"),this.initLoadMoreHeight(),window.onresize=function(){t.initLoadMoreHeight()}}},J={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"lm-ctt"},[t.dateFilters.length>1?s("mt-navbar",{attrs:{fixed:!0},model:{value:t.tabSel,callback:function(e){t.tabSel=e},expression:"tabSel"}},t._l(t.dateFilters,function(e){return s("mt-tab-item",{key:e.id,attrs:{id:e.id}},[t._v(t._s(e.name))])})):t._e(),t._v(" "),t.dateFilters.length>1?s("div",{staticStyle:{height:"49px"}}):t._e(),t._v(" "),s("div",{ref:"loadmoreCtn",staticClass:"loadmore-ctn"},[s("load-more",{ref:"scroll",attrs:{data:t.orderList,scrollbar:!0,pullDownRefresh:!0,pullUpLoad:!0},on:{pullingDown:t.reloadListData,pullingUp:t.loadMoreData}},[s("router-view",{attrs:{orderList:t.orderList},on:{setOptions:t.initOptions,showImageViewer:t.showImageViewer}},[t.noDataFound?s("li",{attrs:{slot:"no-result"},slot:"no-result"},[s("div",{staticClass:"no-result txtc"},[s("i"),t._v(" "),s("span",[t._v("您还没有相关订单")])])]):t._e()])],1)],1),t._v(" "),s("image-viewer",{attrs:{visible:t.imageViewerVis,imageList:t.imageList},on:{onViewerToogle:t.onImageViewerToggle}})],1)},staticRenderFns:[]};var K=s("VU/8")(q,J,!1,function(t){s("d15h")},null,null).exports,X={name:"StarEval",computed:{starClasses:function(){for(var t=[],e=1;e<6;e++)t.push(this.curScore>=e?"icon-star-fill on":"icon-star");return t},needScored:function(){return null===this.score||0===this.score}},props:{score:{type:Number,default:0}},watch:{score:function(t){this.curScore=t}},data:function(){return{curScore:this.score||0}},methods:{selectStar:function(t,e){this.score>0||(this.curScore=t+1)},commitScore:function(){this.$emit("commitScore",this.curScore)}}},Q={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"stars flex"},[t._l(t.starClasses,function(e,i){return s("i",{class:"iconfont "+e,on:{click:function(e){t.selectStar(i,e)}},model:{value:t.score,callback:function(e){t.score=e},expression:"score"}})}),t._v(" "),s("div",{staticClass:"flex-item txtr"},[t.needScored?s("mt-button",{staticClass:"sbt",attrs:{disabled:t.curScore<=0,plain:""},on:{click:t.commitScore}},[t._v("评分")]):t._e()],1)],2)},staticRenderFns:[]};var G=s("VU/8")(X,Q,!1,function(t){s("fs3f")},"data-v-4e509e0c",null).exports,Z={name:"CompleteOrders",props:["orderList"],components:{StarEval:G},data:function(){return{options:{selType:"complete",dateSels:[{id:"CM",name:"本月"},{id:"CY",name:"今年"},{id:"LY",name:"去年"}]}}},methods:{commitScore:function(t,e){console.log(">> "+t+"  "+orderid),function(t,e){return k.post("/score/delivery?id="+t+"&stars="+e)}(e.dorderId,t).then(function(s){s&&(Toast("评价成功"),e.score=t)}).catch(function(t){Toast(t.msg)})}},mounted:function(){this.$emit("setOptions",this.options)}},tt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[t._t("no-result"),t._v(" "),t._l(t.orderList,function(e,i){return s("li",{key:i,staticClass:"order-item flex wrap"},[s("span",{staticClass:"shop flex-item"},[s("i",{staticClass:"iconfont icon-shop"}),t._v(" "+t._s(e.shopName)+" "),s("i",{staticClass:"iconfont icon-right"})]),t._v(" "),s("span",{staticClass:"tel txtr"},[s("a",{attrs:{href:"tel://"+e.shopMobile}},[s("i",{staticClass:"iconfont icon-phone"})])]),t._v(" "),s("i",{staticClass:"separate"}),t._v(" "),s("router-link",{staticClass:"flex-item flex wrap order-dtl",attrs:{tag:"div",to:{name:"OrderDetail",params:{orderid:e.dorderId}}}},[s("span",{staticClass:"flex-item"},[t._v("订单号: "+t._s(e.dorderId))]),t._v(" "),s("span",{staticClass:"time txtr"},[t._v(t._s(e.createDate))]),t._v(" "),s("span",[t._v("订单概要: "+t._s(e.prodDesc))])]),t._v(" "),s("i",{staticClass:"separate"}),t._v(" "),s("span",{staticClass:"star-eval"},[s("star-eval",{attrs:{score:e.score},on:{commitScore:function(s){t.commitScore(s,e)}}})],1)],1)})],2)},staticRenderFns:[]};var et=s("VU/8")(Z,tt,!1,function(t){s("dlgB")},"data-v-425beaaa",null).exports,st={name:"UnompleteOrders",props:["orderList"],components:{},data:function(){return{options:{selType:"uncomplete",dateSels:[{id:"CM",name:"本月"},{id:"LM",name:"上个月"},{id:"CY",name:"今年"}]}}},methods:{couldCusReceived:function(t){return/[QFICA]/.test(t.status)&&null===t.ctmStatus},couldCusInstalled:function(t){return/[ICA]/.test(t.status)&&"RECEIVED"===t.ctmStatus},createIssue:function(t){this.$router.push({name:"IssueCreate",params:{orderid:t}})},commitReceived:function(t){(function(t){return k.post("/ctmOrders/status/received?orderid="+t)})(t.dorderId).then(function(e){t.ctmStatus="RECEIVED",Object(h.Toast)("确认收货成功")}).catch(function(t){Object(h.Toast)(t.msg)})},commitInstalled:function(t){(function(t){return k.post("/ctmOrders/status/installed?orderid="+t)})(t.dorderId).then(function(e){t.ctmStatus="INSTALLED",Object(h.Toast)("确认安装完毕")}).catch(function(t){Object(h.Toast)(t.msg)})}},mounted:function(){this.$emit("setOptions",this.options)}},it={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[t._t("no-result"),t._v(" "),t._l(t.orderList,function(e,i){return s("li",{key:i,staticClass:"order-item flex wrap"},[s("span",{staticClass:"shop flex-item"},[s("i",{staticClass:"iconfont icon-shop"}),t._v(" "+t._s(e.shopName)+" "),s("i",{staticClass:"iconfont icon-right"})]),t._v(" "),s("span",{staticClass:"tel txtr"},[s("a",{attrs:{href:"tel://"+e.shopMobile}},[s("i",{staticClass:"iconfont icon-phone"})])]),t._v(" "),s("i",{staticClass:"separate"}),t._v(" "),s("router-link",{staticClass:"flex-item flex wrap order-dtl",attrs:{tag:"div",to:{name:"OrderDetail",params:{orderid:e.dorderId}}}},[s("span",{staticClass:"flex-item"},[t._v("订单号: "+t._s(e.dorderId))]),t._v(" "),s("span",{staticClass:"time txtr"},[t._v(t._s(e.createDate))]),t._v(" "),s("span",[t._v("订单概要: "+t._s(e.prodDesc))])]),t._v(" "),s("i",{staticClass:"separate"}),t._v(" "),t._l(e.logs,function(e){return s("div",{staticClass:"logs flex"},[s("span",{staticClass:"t txtc"},[t._v(t._s(e.createTime))]),t._v(" "),s("span",{staticClass:"r flex-item"},[t._v(t._s(e.remarks))])])}),t._v(" "),s("i",{staticClass:"separate"}),t._v(" "),s("div",{staticClass:"left-btns"},[s("mt-button",{staticClass:"issue-btn",attrs:{plain:""},on:{click:function(s){t.createIssue(e.dorderId)}}},[s("i",{staticClass:"iconfont icon-error",attrs:{slot:"icon"},slot:"icon"}),t._v("问题反馈")])],1),t._v(" "),s("div",{staticClass:"flex-item txtr right-btns"},[t.couldCusReceived(e)?s("mt-button",{attrs:{plain:""},on:{click:function(s){t.commitReceived(e)}}},[t._v("收货确认")]):t._e(),t._v(" "),t.couldCusInstalled(e)?s("mt-button",{attrs:{plain:""},on:{click:function(s){t.commitInstalled(e)}}},[t._v("安装完毕")]):t._e()],1)],2)})],2)},staticRenderFns:[]};var nt=s("VU/8")(st,it,!1,function(t){s("+m/N")},"data-v-9e47a056",null).exports,ot={name:"IssueOrders",props:["orderList"],components:{StarEval:G},data:function(){return{options:{selType:"issue",dateSels:[],defaultDateId:"ALL"}}},methods:{commitScore:function(t,e){(function(t,e){return k.post("/score/issue?id="+t+"&stars="+e)})(e.issueid,t).then(function(s){s&&(Object(h.Toast)("评价成功"),e.issueScore=t)}).catch(function(t){Object(h.Toast)(t.msg)})},showImages:function(t){if(t){var e=t.split(",");this.$emit("showImageViewer",e)}}},mounted:function(){this.$emit("setOptions",this.options)}},at={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[t._t("no-result"),t._v(" "),t._l(t.orderList,function(e,i){return s("li",{key:i,staticClass:"order-item flex wrap"},[s("span",{staticClass:"shop flex-item"},[s("i",{staticClass:"iconfont icon-shop"}),t._v(" "+t._s(e.shopName)+" "),s("i",{staticClass:"iconfont icon-right"})]),t._v(" "),s("span",{staticClass:"tel txtr"},[s("a",{attrs:{href:"tel://"+e.shopMobile}},[s("i",{staticClass:"iconfont icon-phone"})])]),t._v(" "),s("i",{staticClass:"separate"}),t._v(" "),s("router-link",{staticClass:"flex-item flex wrap order-dtl",attrs:{tag:"div",to:{name:"OrderDetail",params:{orderid:e.dorderId}}}},[s("span",{staticClass:"flex-item"},[t._v("订单号: "+t._s(e.dorderId))]),t._v(" "),s("span",{staticClass:"time txtr"},[t._v(t._s(e.createDate))]),t._v(" "),s("span",[t._v("订单概要: "+t._s(e.prodDesc))])]),t._v(" "),s("i",{staticClass:"separate"}),t._v(" "),s("div",{staticClass:"issue-dtl flex"},[s("span",{staticClass:"flex-item"},[t._v("问题服务号: "+t._s(e.issueid))]),t._v(" "),s("span",{staticClass:"itime txtr"},[t._v(t._s(e.issueCreateTime))])]),t._v(" "),s("i",{staticClass:"separate"}),t._v(" "),s("div",{staticClass:"issue-desc flex-item"},[s("span",{staticClass:"title"},[t._v("问题描述:")]),t._v(" "),s("span",{staticClass:"detail"},[t._v(t._s(e.issueDesc))])]),t._v(" "),e.issueImages&&null!==e.issueImages?s("span",{staticClass:"issue-img",on:{click:function(s){t.showImages(e.issueImages)}}},[s("i",{staticClass:"iconfont icon-image"})]):t._e(),t._v(" "),s("i",{staticClass:"separate"}),t._v(" "),s("div",{staticClass:"solve-plan"},[s("span",{staticClass:"title"},[t._v("解决方案:")]),t._v(" "),s("span",{staticClass:"detail"},[t._v(t._s(e.solutionDetail))]),t._v(" "),null===e.solutionDetail?s("span",{staticClass:"notice txtc"},[t._v("等待提供解决方案")]):t._e()]),t._v(" "),s("span",{staticClass:"star-eval"},["SOLVE_PLAN"===e.issueStatus||"CLOSED"===e.issueStatus?s("star-eval",{attrs:{score:e.issueScore},on:{commitScore:function(s){t.commitScore(s,e)}}}):t._e()],1)],1)})],2)},staticRenderFns:[]};var rt=s("VU/8")(ot,at,!1,function(t){s("mO3q")},"data-v-b81f2a1e",null).exports,lt={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var ct=s("VU/8")({name:"OrderDetail",components:{},data:function(){return{}},methods:{},mounted:function(){}},lt,!1,function(t){s("6Ky8")},"data-v-8387b0d8",null).exports,ut=s("fxnj"),dt=s.n(ut);function ht(t){var e="https://tp.ymdatas.com/wxsvr/api/jssdk/config?appid="+t+"&url="+encodeURIComponent(window.location.href.split("#")[0]);return k.post(e)}var pt={name:"IssueCreate",components:{},data:function(){return{orderid:this.$route.params.orderid,issueDesc:"",isWxJsOk:!1,selImages:[]}},computed:{canChooseMoreImages:function(){return null===this.selImages||this.selImages.length<5}},watch:{$route:function(t){this.initData()}},methods:{initData:function(){this.orderid=this.$route.params.orderid,this.selImages=[]},chooseImages:function(){console.log("start to choose images");var t=this;dt.a.chooseImage({count:5-this.selImages.length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){console.log(123),t.selImages=e.localIds},fail:function(){console.log(222222)}})},delImage:function(t){console.log("delete image: "+t),this.selImages.splice(t,1)},createIssue:function(){var t,e,s;(console.log("orderid: "+this.orderid+" >>>"+this.issueDesc),null===this.issueDesc||this.issueDesc.length<20)?Object(h.Toast)("请输入详细的问题信息"):(t=this.orderid,e=this.issueDesc,s={sourceOrderid:t,issueDesc:e},k.post("/ctmOrders/issueCreate",s)).then(function(t){Object(h.Toast)("提交反馈成功, 反馈服务号: "+t.issueid)}).catch(function(t){Object(h.Toast)(t.msg)})}},mounted:function(){var t=this;encodeURIComponent(window.location.href.split("#")[0]);ht(this.$store.state.wxAppid).then(function(e){dt.a.config({debug:!1,appId:t.$store.state.wxAppid,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["chooseImage","previewImage","getLocalImgData"]})}).catch(function(t){Object(h.Toast)("初始化微信JSSDK失败: "+t.msg)});var e=this;dt.a.ready(function(){console.log("wx jssdk ok"),e.isWxJsOk=!0}),dt.a.error(function(t){console.log("wx jssdk fail")})}},ft={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"issue"},[s("div",{staticClass:"panel info"},[t._v("\n        问题订单: "+t._s(this.orderid)+"\n    ")]),t._v(" "),s("div",{staticClass:"panel"},[s("mt-field",{attrs:{placeholder:"在此输入您需要反馈的问题信息, 需大于20个汉字",type:"textarea",rows:"4",attr:{maxlength:500}},model:{value:t.issueDesc,callback:function(e){t.issueDesc=e},expression:"issueDesc"}}),t._v(" "),s("i",{staticClass:"separate"}),t._v(" "),s("div",{staticClass:"panel image-list"},[t._l(t.selImages,function(e,i){return s("div",{key:i,staticClass:"image"},[s("i",{staticClass:"iconfont icon-close close",on:{click:function(e){t.delImage(i)}}}),t._v(" "),s("img",{attrs:{src:e}})])}),t._v(" "),t.canChooseMoreImages?s("i",{staticClass:"iconfont icon-camera camera-btn",on:{click:t.chooseImages}}):t._e()],2)],1),t._v(" "),s("div",{staticClass:"panel"},[s("mt-button",{attrs:{type:"primary",size:"large"},on:{click:t.createIssue}},[t._v("提交反馈")])],1)])},staticRenderFns:[]};var mt=s("VU/8")(pt,ft,!1,function(t){s("0gWL")},"data-v-18808cb4",null).exports,vt={name:"WxJssdkTest",components:{},data:function(){return{isWxJsOk:!1,inFee:0}},computed:{},methods:{goPay:function(){var t,e,s,i,n;this.isWxJsOk?(t="YTFNCWX",e=this.$store.state.gsid,s=100*this.inFee,i=this.$store.state.wxUser.openid,n={accountno:t,gsid:e,totalFee:s,wxbody:"",openid:i},k.post("https://tp.ymdatas.com/wxsvr/api/pay/jsapi",n)).then(function(t){console.log(t);var e=t.payConfig;e.success=function(t){console.log("调用支付成功"),console.log(t),Object(h.Toast)("支付成功")},e.fail=function(t){console.log(t),Object(h.Toast)("支付失败: "+t.errMsg)},e.cancel=function(t){console.log(t),Object(h.Toast)("取消支付")},dt.a.chooseWXPay(e)}).catch(function(t){Object(h.Toast)(t.msg)}):Object(h.Toast)("微信JSSDK未初始化成功")}},mounted:function(){var t=this;encodeURIComponent(window.location.href.split("#")[0]);ht(this.$store.state.wxAppid).then(function(e){dt.a.config({debug:!1,appId:t.$store.state.wxAppid,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["chooseImage","previewImage","chooseWXPay"]})}).catch(function(t){Object(h.Toast)("初始化微信JSSDK失败: "+t.msg)}),this.inFee=Math.round(10*Math.random()),0===this.inFee&&(this.inFee=10);var e=this;dt.a.ready(function(){console.log("wx jssdk ok"),e.isWxJsOk=!0}),dt.a.error(function(t){console.log("wx jssdk fail"),Object(h.Toast)(t.errMsg)})}},gt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"test"},[s("mt-field",{attrs:{label:"金额(元):",placeholder:"请输入支付的金额",type:"tel"},model:{value:t.inFee,callback:function(e){t.inFee=e},expression:"inFee"}}),t._v(" "),s("mt-button",{attrs:{type:"primary",size:"large"},on:{click:t.goPay}},[t._v("支付1~10随机")])],1)},staticRenderFns:[]};var _t=s("VU/8")(vt,gt,!1,function(t){s("S2aj")},"data-v-cb160304",null).exports;n.default.use(c.a);var wt=new c.a({routes:[{path:"/",name:"Index",redirect:"/orders/uncomplete",meta:{title:"Index Page"}},{path:"/home",name:"Home",component:d,meta:{title:"主页"}},{path:"/login",name:"Login",component:U,meta:{title:"登陆"}},{path:"/bindMobile",name:"BindMobile",component:B,meta:{title:"绑定手机号"}},{path:"/orders/:tp",component:K,children:[{path:"/orders/complete",component:et,meta:{title:"已完成订单"}},{path:"/orders/uncomplete",component:nt,meta:{title:"未完成订单"}},{path:"/orders/issue",component:rt,meta:{title:"问题单"}}]},{path:"/orderDetail/:orderid",name:"OrderDetail",component:ct,meta:{title:"订单明细"}},{path:"/issueCreate/:orderid",name:"IssueCreate",component:mt,meta:{title:"问题反馈"}},{path:"/wxJssdkTest",name:"WxJssdkTest",component:_t,meta:{title:"微信JsSDK测试页面"}}]}),bt=s("v5o6"),xt=s.n(bt);s("j1ja"),s("d8/S"),s("HSk6");n.default.use(p.a),n.default.config.productionTip=!1,xt.a.attach(document.body),wt.beforeEach(function(t,e,s){T.state.inited||T.commit("initStore"),T.state.token||"Login"===t.name?(t.meta.title&&(document.title=t.meta.title),s()):s({name:"Login",query:{redirect:t.fullPath}})}),new n.default({el:"#app",router:wt,store:T,components:{App:l},template:"<App/>",beforeCreate:function(){var t=wt.currentRoute;T.state.token&&"BindMobile"!==t.name&&k.post("/user/wxCheckMobile").then(function(e){e.isBind||wt.push({name:"BindMobile",query:{redirect:t.fullPath,needBind:!0}})}),console.log("before create")}})},Q5Z6:function(t,e){},S2aj:function(t,e){},Ta9z:function(t,e){},TjKP:function(t,e){},UjVw:function(t,e){},d15h:function(t,e){},"d8/S":function(t,e){},dlgB:function(t,e){},fs3f:function(t,e){},mO3q:function(t,e){},roQ7:function(t,e){},vY1k:function(t,e){},yD7z:function(t,e){},zSBH:function(t,e){}},["NHnr"]);